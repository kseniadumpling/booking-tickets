(window["webpackJsonpbooking-tickets"]=window["webpackJsonpbooking-tickets"]||[]).push([[0],{152:function(e,t,a){e.exports=a(221)},157:function(e,t,a){},158:function(e,t,a){},202:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(11),r=a.n(s),l=(a(157),a(34)),o=a(35),c=a(37),m=a(36),d=a(38),h=a(32),u=a(113),p=a.n(u),b=a(144),k=a(40),g=a.n(k),v=a(89),f=a.n(v),y=a(145),E=a.n(y),T=a(147),w=a.n(T),S=a(60),C=a.n(S),O=(a(158),a(18)),j=a.n(O),N=a(148),V=a.n(N),x=a(95),L=a.n(x),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleUserInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(b.a)({},t,n),function(){a.validateField(t,n)})},a.state={showModal:!1,time:null,availableTickets:null,bookedTickets:0,name:"",phone:"",ticketValid:!1,nameValid:!1,phoneValid:!1,formValid:!1},a.handleShowModal=a.handleShowModal.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleCancel=a.handleCancel.bind(Object(h.a)(a)),a.renderTimeButtons=a.renderTimeButtons.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleShowModal",value:function(){this.setState({showModal:!0})}},{key:"handleSessionSelection",value:function(e,t){this.setState({time:e,availableTickets:t})}},{key:"handleSubmit",value:function(){console.log(this.setOutput()),this.dropStates()}},{key:"handleCancel",value:function(){this.dropStates()}},{key:"validateField",value:function(e,t){var a=this.state.ticketValid,n=this.state.nameValid,i=this.state.phoneValid;switch(e){case"bookedTickets":a=+t>0&&+t<=this.state.availableTickets;break;case"name":n=t.match(/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/);break;case"phone":i=t.match(/^((\+\d{1})[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/)}this.setState({ticketValid:a,nameValid:n,phoneValid:i},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.ticketValid&&this.state.nameValid&&this.state.phoneValid})}},{key:"dropStates",value:function(){this.setState({showModal:!1,time:null,availableTickets:null,bookedTickets:0,name:"",phone:"",ticketValid:!1,nameValid:!1,phoneValid:!1,formValid:!1})}},{key:"setOutput",value:function(){return[this.props.data.name,this.props.sessions[0].date,this.state.time,this.state.bookedTickets+" ticket(s)",this.state.name,this.state.phone]}},{key:"renderTimeButtons",value:function(){var e=this;return this.props.sessions.map(function(t){return"0"!==t.availableTickets?i.a.createElement(L.a,{key:t.time,value:t.time,className:"mr-2 rounded",variant:"outline-primary",onClick:function(){return e.handleSessionSelection(t.time,t.availableTickets)}},t.time):i.a.createElement(E.a,{key:t.time,overlay:i.a.createElement(w.a,{id:"tooltip-disabled"},"No available tickets")},i.a.createElement("span",{className:"d-inline-block"},i.a.createElement(g.a,{className:"mr-2",variant:"outline-primary",disabled:!0,style:{pointerEvents:"none"}},t.time)))})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,{key:this.props.data.id},i.a.createElement(g.a,{variant:"primary",onClick:this.handleShowModal},"Book"),i.a.createElement(f.a,{show:this.state.showModal,size:"lg"},i.a.createElement(f.a.Body,{className:"bg-gray-light"},i.a.createElement("img",{width:150,height:200,className:"mr-3 float-left",src:this.props.data.imgURL,alt:"poster"}),i.a.createElement("h5",null,this.props.data.name),i.a.createElement("p",null,this.props.data.description),i.a.createElement("h6",{className:"pt-4"},this.props.sessions[0].date),i.a.createElement(V.a,{type:"radio",name:"options"},this.renderTimeButtons()),i.a.createElement("small",null,i.a.createElement("br",null),"Tickets available: ",this.state.availableTickets),i.a.createElement(C.a,{className:"pt-5",noValidate:!0,validated:this.state.formValid},i.a.createElement(C.a.Row,null,i.a.createElement(j.a,{lg:"2",sm:"12"},i.a.createElement(C.a.Control,{type:"number",placeholder:"Tickets",name:"bookedTickets",min:"1",max:this.state.availableTickets,disabled:!this.state.availableTickets,onChange:this.handleUserInput,className:"".concat(t.renderErrorBorder(!this.state.ticketValid,this.state.time)),required:!0})),i.a.createElement(j.a,{lg:"5",sm:"12"},i.a.createElement(C.a.Control,{type:"text",placeholder:"Enter name",name:"name",disabled:!this.state.time,onChange:this.handleUserInput,className:"".concat(t.renderErrorBorder(!this.state.nameValid,this.state.time)),required:!0})),i.a.createElement(j.a,{lg:"5",sm:"12"},i.a.createElement(C.a.Control,{type:"tel",placeholder:"Enter phone",name:"phone",disabled:!this.state.time,onChange:this.handleUserInput,className:"".concat(t.renderErrorBorder(!this.state.phoneValid,this.state.time)),required:!0}))))),i.a.createElement(f.a.Footer,{className:"bg-gray-light"},i.a.createElement(g.a,{variant:"secondary",onClick:this.handleCancel},"Cancel"),i.a.createElement(g.a,{variant:"primary",type:"submit",disabled:!this.state.formValid,onClick:this.handleSubmit},"Submit"))))}}],[{key:"renderErrorBorder",value:function(e,t){return e&&t?"has-error":""}}]),t}(n.Component),M=a(74),B=a.n(M),U=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getProperSessions",value:function(e){return this.props.data.sessions.filter(function(t){return t.date===e})}},{key:"render",value:function(){var e=this.getProperSessions(this.props.date);return i.a.createElement(p.a,{className:"py-4",key:this.props.data.id},i.a.createElement("img",{width:105,height:140,className:"mr-3",src:this.props.data.imgURL,alt:"poster"}),i.a.createElement(p.a.Body,null,i.a.createElement(B.a,null,i.a.createElement(j.a,{md:"7",sm:"12"},i.a.createElement("h5",null,this.props.data.name),i.a.createElement("h6",null,this.props.data.genre),i.a.createElement("p",null,this.props.data.description)),i.a.createElement(j.a,{md:"3",sm:"6",className:"text-center my-auto"},t.getTimetable(e)),i.a.createElement(j.a,{md:"2",sm:"6",className:"text-center my-auto"},i.a.createElement(D,{data:this.props.data,sessions:e})))))}}],[{key:"getTimetable",value:function(e){return e.map(function(e){return i.a.createElement("h6",{key:e.time},e.time)})}}]),t}(n.Component),A=a(29),R=a(68),F=a.n(R),G=a(151),I=a.n(G),z=(a(202),a(149)),J=(a(203),a(114)),q=a(150),P=a.n(q),Y=a(85),Z=a.n(Y);Object(J.registerLocale)("en",P.a),Object(J.setDefaultLocale)("en");var H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={date:new Date("09/01/2019"),genre:null},a.handleDateChange=a.handleDateChange.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleDateChange",value:function(e){this.setState({date:e})}},{key:"handleGenreSelection",value:function(e){this.setState({genre:e})}},{key:"renderGenresDropdown",value:function(){var e=this,a=t.getGenresList().map(function(t,a){return i.a.createElement(F.a.Item,{key:a,as:"button",onClick:function(){return e.handleGenreSelection({item:t})}},t)});return a.push(i.a.createElement(i.a.Fragment,{key:a.length+1},i.a.createElement(F.a.Divider,null),i.a.createElement(F.a.Item,{as:"button",onClick:function(){return e.handleGenreSelection(null)}},"Show all"))),a}},{key:"render",value:function(){return i.a.createElement(Z.a,{className:"p-lg-5 p-md-5"},i.a.createElement(j.a,{lg:"10",md:"12",sm:"12",className:"mx-auto"},i.a.createElement(B.a,{className:"py-2 justify-content-center text-center"},i.a.createElement(j.a,{lg:"3",md:"4",sm:"5",className:"pb-2"},i.a.createElement(z.a,{className:"form-control btn btn-primary btn-size",type:"button",dateFormat:"MMMM d",minDate:new Date("08/29/2019"),maxDate:new Date("09/04/2019"),selected:this.state.date,onChange:this.handleDateChange})),i.a.createElement(j.a,{lg:"3",md:"4",sm:"5",className:"pb-2"},i.a.createElement(I.a,{title:"Choose genre",block:!0},this.renderGenresDropdown()))),t.renderMovieCards(this.state.genre,this.state.date)))}}],[{key:"getGenresList",value:function(){for(var e=[],t=0;t<A.movieList.length;t++)e.includes(A.movieList[t].genre)||e.push(A.movieList[t].genre);return e}},{key:"renderMovieCards",value:function(e,a){for(var n=[],s=0;s<A.movieList.length;s++){var r=t.findDate(A.movieList[s].sessions,a);e&&A.movieList[s].genre!==e.item||!r||n.push(i.a.createElement(U,{key:s,data:A.movieList[s],date:r}))}return n.length||n.push(i.a.createElement("h6",{className:"text-center pt-5"},"Sorry, there is no movie for these parameters")),n}},{key:"findDate",value:function(e,t){var a=e.find(function(e){return new Date(e.date).getTime()===t.getTime()});return a?a.date:null}}]),t}(n.Component),W=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(Z.a,{className:"pt-5"},i.a.createElement("h2",{className:"text-center"},"Book Your Tickets"),i.a.createElement(H,{data:A.movieList}))}}]),t}(n.Component);r.a.render(i.a.createElement(W,null),document.getElementById("root"))},29:function(e){e.exports=JSON.parse('{"movieList":[{"id":"1","name":"Tuxtanic","genre":"Drama","description":"A young bird falls in love with a kind but poor penguin aboard the luxurious ship","imgURL":"/img/tuxtanic.png","sessions":[{"availableTickets":"15","date":"08/29/2019","time":"12:00"},{"availableTickets":"2","date":"09/01/2019","time":"13:00"},{"availableTickets":"0","date":"09/01/2019","time":"13:30"},{"availableTickets":"12","date":"09/01/2019","time":"18:30"}]},{"id":"2","name":"How to Train Your Penguin","genre":"Animation","description":"A hapless young Viking who aspires to hunt penguins becomes the unlikely friend of a young penguin himself","imgURL":"/img/httyp.png","sessions":[{"availableTickets":"3","date":"08/30/2019","time":"11:00"},{"availableTickets":"9","date":"08/30/2019","time":"15:00"},{"availableTickets":"3","date":"09/01/2019","time":"14:00"},{"availableTickets":"7","date":"09/03/2019","time":"10:30"}]},{"id":"3","name":"Tuxminator 2: Judgment Day","genre":"Action","description":"A cyborg, identical to the one who failed to kill Sarah Connor, must now protect her teenage son, John Connor","imgURL":"/img/tuxminator.png","sessions":[{"availableTickets":"20","date":"09/02/2019","time":"18:00"},{"availableTickets":"20","date":"09/03/2019","time":"18:30"}]},{"id":"4","name":"The Tuxfather","genre":"Drama","description":"The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son","imgURL":"/img/tuxfather.png","sessions":[{"availableTickets":"8","date":"08/31/2019","time":"23:20"},{"availableTickets":"3","date":"09/01/2019","time":"20:00"},{"availableTickets":"3","date":"09/01/2019","time":"21:00"},{"availableTickets":"7","date":"09/02/2019","time":"19:30"}]},{"id":"5","name":"Tux Wars: Episode V","genre":"Action","description":"After the Rebels are brutally overpowered by the Empire, Linus Foldwalker begins concurrent training with Yoda, while his friends are pursued by Darth Window","imgURL":"/img/tuxwars.png","sessions":[{"availableTickets":"5","date":"08/30/2019","time":"12:00"},{"availableTickets":"10","date":"09/01/2019","time":"13:00"},{"availableTickets":"7","date":"09/04/2019","time":"13:30"}]},{"id":"6","name":"The Tuxing","genre":"Horror","description":"A family heads to an isolated hotel for the winter where a sinister presence influences the father into violence","imgURL":"/img/tuxing.png","sessions":[{"availableTickets":"3","date":"09/01/2019","time":"22:40"}]}]}')}},[[152,1,2]]]);
//# sourceMappingURL=main.2bbddb84.chunk.js.map